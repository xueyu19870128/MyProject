!function(e,r){"use strict";if(e.SparkMD5&&e.File){var t=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=new SparkMD5.ArrayBuffer,o=2097152;Q.md5File=function(e,r,n){function a(){var r=p*o,i=r+o>=l?l:r+o;f.readAsArrayBuffer(t.call(e,r,i))}var l=e.size,c=Math.ceil(l/o),p=0,f=new FileReader,u=Date.now();i.reset(),f.onload=function(e){i.append(e.target.result),p++,n&&n(p/c),c>p?a():r&&r(i.end(),Date.now()-u)},f.onerror=r,a()}}}(window);